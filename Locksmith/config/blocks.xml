<locksmith>
	<!-- 1. remove xpath -->
	<!-- REMOVE DOORS WE WANT TO SUPPORT -->
	<remove xpath="/blocks/block[@name='secureReinforcedDoorWooden']" />
	<remove xpath="/blocks/block[@name='metalReinforcedDoorWooden']" />
	<remove xpath="/blocks/block[@name='ironDoor1_v2']" />
	<remove xpath="/blocks/block[@name='ironDoor1_v3']" />
	<!-- 2. set xpath -->
	<!-- UPDATE T1 DOORS TO MAINTAIN CRAFTING UPGRADE PATH -->
	<set xpath="/blocks/block[@name='secureDoorWooden']/property[@class='UpgradeBlock']/property[@name='ToBlock']/@value">
		secureReinforcedDoorWooden_default
	</set>
	<set xpath="/blocks/block[@name='ironDoor1_v1']/property[@class='UpgradeBlock']/property[@name='ToBlock']/@value">
		ironDoor1_v2_default
	</set>
	<!-- 3. append _default -->
	<!-- CREATE SHADOW COPIES OF T2/T3 DOORS TO MAINTAIN UPGRADE PATH -->
	<!-- T2 ONLY: set @UpgradeBlock/@ToBlock = next tier up _copy version -->
	<!-- T3 ONLY: set @DowngradeBlock/@value = next tier down _copy version -->
	<append xpath="/blocks">
		<block name="secureReinforcedDoorWooden_default">
			<property name="DescriptionKey" value="doorGroupDesc" />
			<property name="Class" value="DoorSecure" />
			<property name="Material" value="MwoodReinforced" />
			<property name="StabilitySupport" value="false" />
			<property name="MaxDamage" value="250" />
			<property name="PassThroughDamage" value="true" />
			<property name="LightOpacity" value="1" />
			<property name="Shape" value="ModelEntity" />
			<property name="BlockTag" value="Door" />
			<property name="Tags" value="door" />
			<property name="Model" value="Entities/Doors/wooden_door_v2Prefab" />
			<property name="Place" value="Door" />
			<property name="PlaceEverywhere" value="true" />
			<property name="AllowAllRotations" value="true" />
			<property name="ModelOffset" value="0,0,0" />
			<property name="ImposterExchange" value="imposterBlock" param1="35" />
			<property name="MeshDamage" value="
        Door/Door_DMG0, 250,
        Door/Door_DMG1, 200,
        Door/Door_DMG2, 150,
        Door/Door_DMG3, 100,
        Door/Door_DMG4, 50" />
			<property name="OpenSound" value="door_wood_roughcut_open" />
			<property name="CloseSound" value="door_wood_roughcut_close" />
			<property class="RepairItems">
				<property name="resourceWood" value="3" />
			</property>
			<property class="UpgradeBlock">
				<property name="ToBlock" value="metalReinforcedDoorWooden_default" />
				<property name="Item" value="resourceScrapIron" />
				<property name="ItemCount" value="12" />
				<property name="UpgradeHitCount" value="4" />
			</property>
			<property name="CustomUpgradeSound" value="place_block_metal" />
			<property name="DowngradeBlock" value="secureDoorWooden" />
			<drop event="Harvest" name="resourceWood" count="2" tag="allHarvest" />
			<drop event="Destroy" count="0" />
			<drop event="Fall" name="terrDestroyedWoodDebris" count="1" prob="0.75" stick_chance="1" />
			<property name="FilterTags" value="MC_building,SC_doors" />
			<property name="SortOrder1" value="7060" />
			<property name="SortOrder2" value="0105" />
		</block>
		<block name="metalReinforcedDoorWooden_default">
			<property name="DescriptionKey" value="doorGroupDesc" />
			<property name="Class" value="DoorSecure" />
			<property name="Material" value="MwoodMetal" />
			<property name="StabilitySupport" value="false" />
			<property name="PassThroughDamage" value="true" />
			<property name="LightOpacity" value="1" />
			<property name="Shape" value="ModelEntity" />
			<property name="BlockTag" value="Door" />
			<property name="Tags" value="door" />
			<property name="Model" value="Entities/Doors/wooden_door_v3Prefab" />
			<property name="Place" value="Door" />
			<property name="PlaceEverywhere" value="true" />
			<property name="AllowAllRotations" value="true" />
			<property name="ModelOffset" value="0,0,0" />
			<property name="ImposterExchange" value="imposterBlock" param1="35" />
			<property name="MeshDamage" value="
        Door/Door_DMG0, 300,
        Door/Door_DMG1, 220,
        Door/Door_DMG2, 170,
        Door/Door_DMG3, 120,
        Door/Door_DMG4, 70" />
			<property name="OpenSound" value="door_wood_roughcut_open" />
			<property name="CloseSound" value="door_wood_roughcut_close" />
			<property class="RepairItems">
				<property name="resourceScrapIron" value="10" />
			</property>
			<property class="UpgradeBlock">
				<property name="ToBlock" value="ironDoor1_v1" />
				<property name="Item" value="ironDoor1_v1" />
				<property name="ItemCount" value="1" />
				<property name="UpgradeHitCount" value="5" />
			</property>
			<property name="CustomUpgradeSound" value="place_block_metal" />
			<property name="DowngradeBlock" value="secureReinforcedDoorWooden_default" />
			<drop event="Harvest" name="resourceScrapIron" count="6" tag="allHarvest" />
			<drop event="Destroy" count="0" />
			<drop event="Fall" name="terrDestroyedWoodDebris" count="1" prob="0.75" stick_chance="1" />
			<property name="FilterTags" value="MC_building,SC_doors" />
			<property name="SortOrder1" value="7060" />
			<property name="SortOrder2" value="0110" />
		</block>
		<block name="ironDoor1_v2_default">
			<property name="Extends" value="ironDoor1_v1" />
			<property name="DescriptionKey" value="doorGroupDesc" />
			<property name="Model" value="Entities/Doors/steel_door_1_v2Prefab" />
			<property class="UpgradeBlock">
				<property name="ToBlock" value="ironDoor1_v3_default" />
			</property>
			<property name="DowngradeBlock" value="ironDoor1_v1" />
			<property name="SortOrder2" value="0305" />
		</block>
		<block name="ironDoor1_v3_default">
			<property name="Extends" value="ironDoor1_v1" />
			<property name="DescriptionKey" value="doorGroupDesc" />
			<property name="Model" value="Entities/Doors/steel_door_1_v3Prefab" />
			<property class="UpgradeBlock">
				<property name="ToBlock" value="vaultDoor01" />
				<property name="Item" value="vaultDoor01" />
				<property name="ItemCount" value="1" />
				<property name="UpgradeHitCount" value="6" />
			</property>
			<property name="DowngradeBlock" value="ironDoor1_v2_default" />
			<property name="SortOrder2" value="0310" />
		</block>
	</append>
	<!-- 4. append vanillaNameSpace -->
	<!-- CREATE NEW T2/T3 DOORS, ADDING LOCKPICK SUPPORT, USING THE EXISTING NAMESPACE -->
	<!-- 1. extend the _default version -->
	<!-- 2. set Class/@value = SecureLoot -->
	<!-- 3. set Tags/@value = safes,door -->
	<!-- 4. set DowngradeBlock/@value = insecure version of this block -->
	<!-- 5. set DescriptionKey/@value = cntGunSafeDesc -->
	<!-- 6. append LockPickItem, LockPickTime, LockPickBreakChance, LootList -->
	<append xpath="/blocks">
		<block name="secureReinforcedDoorWooden">
			<property name="DescriptionKey" value="cntGunSafeDesc" />
			<property name="Class" value="SecureLoot" />
			<property name="LockPickItem" value="resourceLockPick" />
			<property name="LockPickTime" value="5" />
			<property name="LockPickBreakChance" value="0.65" />
			<property name="LootList" value="secureDoorContainer" />
			<property name="Tags" value="safes,door" />
			<property class="UpgradeBlock">
				<property name="ToBlock" value="metalReinforcedDoorWooden" />
			</property>
			<property name="CustomUpgradeSound" value="place_block_metal" />
			<property name="DowngradeBlock" value="insecureReinforcedDoorWooden" />
		</block>
		<block name="metalReinforcedDoorWooden">
			<property name="Extends" value="metalReinforcedDoorWooden_default" />
			<property name="DescriptionKey" value="cntGunSafeDesc" />
			<property name="Class" value="SecureLoot" />
			<property name="LockPickItem" value="resourceLockPick" />
			<property name="LockPickTime" value="5" />
			<property name="LockPickBreakChance" value="0.65" />
			<property name="LootList" value="secureDoorContainer" />
			<property name="Tags" value="safes,door" />
			<property class="UpgradeBlock">
				<property name="ToBlock" value="ironDoor1_v1" />
			</property>
			<property name="DowngradeBlock" value="insecureMetalReinforcedDoorWooden" />
		</block>
		<block name="ironDoor1_v2">
			<property name="Extends" value="ironDoor1_v2_default" />
			<property name="DescriptionKey" value="cntGunSafeDesc" />
			<property name="Class" value="SecureLoot" />
			<property name="LockPickItem" value="resourceLockPick" />
			<property name="LockPickTime" value="5" />
			<property name="LockPickBreakChance" value="0.65" />
			<property name="LootList" value="secureDoorContainer" />
			<property name="Tags" value="safes,door" />
			<property class="UpgradeBlock">
				<property name="ToBlock" value="ironDoor1_v3" />
			</property>
			<property name="DowngradeBlock" value="insecureIronDoor1_v2" />
		</block>
		<block name="ironDoor1_v3">
			<property name="Extends" value="ironDoor1_v3_default" />
			<property name="DescriptionKey" value="cntGunSafeDesc" />
			<property name="Class" value="SecureLoot" />
			<property name="LockPickItem" value="resourceLockPick" />
			<property name="LockPickTime" value="5" />
			<property name="LockPickBreakChance" value="0.65" />
			<property name="LootList" value="secureDoorContainer" />
			<property name="Tags" value="safes,door" />
			<!--
			TODO: add support for vault doors?
			<property class="UpgradeBlock">
			<property name="ToBlock" value="vaultDoor01" />
			</property>
			-->
			<property name="DowngradeBlock" value="insecureIronDoor1_v3" />
		</block>
	</append>
	<!-- 4. append insecureDoor -->
	<!-- APPEND INSECURE VERSIONS OF LOCKED DOORS -->
	<!-- include all 3 tiers -->
	<!-- set prop Class/@value = Door" -->
	<!-- set prop UpgradeBlock/@ToBlock = next insecure tier -->
	<!-- set prop DowngradeBlock/@value = previous insecure tier -->
	<append xpath="/blocks">
		<block name="insecureDoorWooden">
			<property name="Extends" value="secureDoorWooden" />
			<property name="DescriptionKey" value="doorGroupDesc" />
			<property name="Class" value="Door" />
			<property class="UpgradeBlock">
				<property name="ToBlock" value="insecureReinforcedDoorWooden" />
			</property>
		</block>
		<block name="insecureReinforcedDoorWooden">
			<property name="Extends" value="secureReinforcedDoorWooden_default" />
			<property name="DescriptionKey" value="doorGroupDesc" />
			<property name="Class" value="Door" />
			<property class="UpgradeBlock">
				<property name="ToBlock" value="insecureMetalReinforcedDoorWooden" />
			</property>
			<property name="DowngradeBlock" value="insecureDoorWooden" />
		</block>
		<block name="insecureMetalReinforcedDoorWooden">
			<property name="Extends" value="secureReinforcedDoorWooden_default" />
			<property name="DescriptionKey" value="doorGroupDesc" />
			<property name="Class" value="Door" />
			<property class="UpgradeBlock">
				<property name="ToBlock" value="insecureIronDoor1_v1" />
			</property>
			<property name="DowngradeBlock" value="insecureReinforcedDoorWooden" />
		</block>
		<!-- NOTE: upgrade path from DoorWooden to IronDoor1_v1 is one-way -->
		<block name="insecureIronDoor1_v1">
			<property name="Extends" value="ironDoor1_v1" />
			<property name="DescriptionKey" value="doorGroupDesc" />
			<property name="Class" value="Door" />
			<property class="UpgradeBlock">
				<property name="ToBlock" value="insecureIronDoor1_v2" />
			</property>
		</block>
		<block name="insecureIronDoor1_v2">
			<property name="Extends" value="ironDoor1_v2_default" />
			<property name="DescriptionKey" value="doorGroupDesc" />
			<property name="Class" value="Door" />
			<property class="UpgradeBlock">
				<property name="ToBlock" value="insecureIronDoor1_v3" />
			</property>
			<property name="DowngradeBlock" value="insecureIronDoor1_v1" />
		</block>
		<block name="insecureIronDoor1_v3">
			<property name="Extends" value="ironDoor1_v3_default" />
			<property name="DescriptionKey" value="doorGroupDesc" />
			<property name="Class" value="Door" />
			<property class="UpgradeBlock">
				<property name="ToBlock" value="vaultDoor01" />
			</property>
			<property name="DowngradeBlock" value="insecureIronDoor1_v2" />
		</block>
	</append>
</locksmith>
<!--
//
all blocks with
<property name="Class" value="DoorSecure"/>
//
these first 6 basic doors make up a single upgrade path
and are player-craftable
//
7060
0100 secureDoorWooden
0105 secureReinforcedDoorWooden
0110 metalReinforcedDoorWooden
0300 ironDoor1_v1
0305 ironDoor1_v2
0310 ironDoor1_v3
//
these are used only in POIs ??
//
0200 commercialDoor1_v1
0205 commercialDoor1_v2
0210 commercialDoor1_v3
0220 commercialDoor2_v1
0225 commercialDoor2_v2
0230 commercialDoor2_v3
0260 commercialDoor4_v1
0265 commercialDoor4_v2
0270 commercialDoor4_v3
0140 houseFrontDoor1_v1
0145 houseFrontDoor1_v2
0150 houseFrontDoor1_v3
0160 houseFrontDoor2_v1
0165 houseFrontDoor2_v2
0170 houseFrontDoor2_v3
0340 vaultDoor01
0345 vaultDoor02
0350 vaultDoor03
// HATCHES
woodHatch1_v1
woodHatch1_v2
woodHatch1_v3
scrapHatch_v1
scrapHatch_v2
scrapHatch_v3
manholeHatch
// CELLARS
cellarDoorDoubleWood
cellarDoorDoubleIron
cellarDoorDoubleSteel
// SHUTTERS
shuttersWood01
shuttersIron01
shuttersSteel01
shuttersWood02
shuttersIron02
shuttersSteel02
// GARAGE DOORS
can they be unlocked? is there an "open" state?
-->
